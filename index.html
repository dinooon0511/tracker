<!DOCTYPE html>
<html lang="ru">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Фитнес Трекер</title>
    <style>
      body {
        font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, Helvetica, Arial,
          sans-serif;
        margin: 0;
        padding: 0;
        background-color: #f5f5f5;
        color: #333;
        display: flex;
        flex-direction: column;
        align-items: center;
        min-height: 100vh;
      }

      .container {
        width: 100%;
        max-width: 400px;
        padding: 20px;
        box-sizing: border-box;
      }

      .header {
        text-align: center;
        font-size: 24px;
        font-weight: bold;
        margin-bottom: 30px;
        color: #000;
      }

      .button-group {
        border: 0px solid black;
        padding: 7px;
        background-color: #fff;
        border-radius: 30px;
        display: flex;
        justify-content: space-between;
        margin-bottom: 30px;
        position: relative;
        box-shadow: 0 1px 3px rgba(0, 0, 0, 0.1);
      }

      .button-group::after {
        content: '';
        position: absolute;
        margin: 0px 5px;
        top: 4px;
        left: 0;
        height: 47px;
        background-color: #000000;
        border-radius: 30px;
        transition: all 0.3s ease;
      }

      .button-group.login-active::after {
        width: 50%;
        transform: translateX(0);
      }

      .button-group.register-active::after {
        width: 48.5%;
        transform: translateX(100%);
      }

      .button {
        flex: 1;
        padding: 12px;
        text-align: center;
        font-size: 16px;
        font-weight: 500;
        border: none;
        border-radius: 10px;
        background: none;
        cursor: pointer;
        transition: color 0.3s;
        position: relative;
        z-index: 1;
      }

      .button:first-child {
        margin-right: 10px;
      }

      .button-login {
        color: #000;
      }

      .button-login.active {
        color: #ffffff;
        font-weight: 600;
      }

      .button-register {
        color: #000;
      }

      .button-register.active {
        color: #ffffff;
        font-weight: 600;
      }

      .form-container {
        background-color: #fff;
        border-radius: 30px;
        padding: 20px;
        box-shadow: 0 1px 3px rgba(0, 0, 0, 0.1);
      }

      .input-group {
        margin-bottom: 20px;
      }

      .input-group label {
        display: block;
        margin-bottom: 8px;
        font-size: 16px;
        color: #555;
      }

      .input-group input {
        width: 100%;
        padding: 12px;
        font-size: 16px;
        border: 1px solid #ddd;
        border-radius: 30px;
        box-sizing: border-box;
      }

      .submit-button {
        width: 100%;
        padding: 12px;
        background-color: #000000;
        color: #fff;
        border: none;
        border-radius: 30px;
        font-size: 16px;
        font-weight: 500;
        cursor: pointer;
        transition: background-color 0.2s;
      }

      .submit-button:hover {
        background-color: #363636;
      }

      .hidden {
        display: none;
      }

      /* Новые стили для страницы профиля */
      .profile-container {
        background-color: #fff;
        border-radius: 30px;
        padding: 30px;
        box-shadow: 0 1px 3px rgba(0, 0, 0, 0.1);
        margin-bottom: 20px;
      }

      .profile-header {
        font-size: 24px;
        margin-bottom: 25px;
        text-align: center;
      }

      .user-profile {
        display: flex;
        align-items: center;
        margin-bottom: 30px;
      }

      .avatar-container {
        position: relative;
        width: 100px;
        height: 100px;
        margin-right: 20px;
      }

      .avatar {
        width: 100%;
        height: 100%;
        border-radius: 50%;
        object-fit: cover;
        background-color: #eee;
        display: flex;
        align-items: center;
        justify-content: center;
        overflow: hidden;
      }

      .default-avatar {
        width: 80%;
        height: 80%;
        object-fit: contain;
      }

      .avatar-upload {
        position: absolute;
        bottom: 0;
        right: 0;
        background-color: #007aff;
        color: white;
        width: 30px;
        height: 30px;
        border-radius: 50%;
        display: flex;
        align-items: center;
        justify-content: center;
        cursor: pointer;
      }

      .avatar-upload input {
        display: none;
      }

      .user-info {
        flex: 1;
      }

      .username {
        font-size: 20px;
        font-weight: 600;
        margin-bottom: 5px;
      }

      .points {
        font-size: 16px;
        color: #666;
      }

      .stats-container {
        background-color: #f9f9f9;
        border-radius: 20px;
        padding: 20px;
        margin-bottom: 30px;
      }

      .stats-row {
        display: flex;
        justify-content: space-between;
        margin-bottom: 15px;
      }

      .stats-row:last-child {
        margin-bottom: 0;
      }

      .stat-item {
        flex: 1;
        text-align: center;
      }

      .stat-value {
        font-size: 18px;
        font-weight: 600;
        margin-bottom: 5px;
      }

      .stat-label {
        font-size: 14px;
        color: #666;
      }

      .logout-btn {
        width: 100%;
        padding: 15px;
        background-color: #000000;
        color: #fff;
        border: none;
        border-radius: 30px;
        font-size: 16px;
        font-weight: 500;
        cursor: pointer;
        transition: background-color 0.2s;
      }

      .logout-btn:hover {
        background-color: #363636;
      }

      /* Стили для нижнего меню */
      .bottom-menu {
        position: fixed;
        bottom: 0;
        left: 0;
        right: 0;
        padding: 15px 20px;
        z-index: 100;
      }

      .menu-group {
        border: 0px solid black;
        padding: 7px;
        background-color: #fff;
        border-radius: 30px;
        display: flex;
        justify-content: space-between;
        position: relative;
        box-shadow: 0 1px 3px rgba(0, 0, 0, 0.1);
      }

      .menu-group::after {
        content: '';
        position: absolute;
        margin: 0px 5px;
        top: 4px;
        left: 0;
        height: 47px;
        background-color: #000000;
        border-radius: 30px;
        transition: all 0.3s ease;
      }

      .menu-group.profile-active::after {
        width: 25%;
        transform: translateX(0);
      }

      .menu-group.settings-active::after {
        width: 25%;
        transform: translateX(100%);
      }

      .menu-group.calories-active::after {
        width: 25%;
        transform: translateX(200%);
      }

      .menu-group.tasks-active::after {
        width: 25%;
        transform: translateX(300%);
      }

      .menu-button {
        flex: 1;
        padding: 12px;
        text-align: center;
        font-size: 14px;
        font-weight: 500;
        border: none;
        border-radius: 10px;
        background: none;
        cursor: pointer;
        transition: color 0.3s;
        position: relative;
        z-index: 1;
      }

      .menu-button.active {
        color: #ffffff;
        font-weight: 600;
      }

      /* Контент для разных вкладок */
      .tab-content {
        display: none;
      }

      .tab-content.active {
        display: block;
      }
    </style>
  </head>
  <body>
    <!-- Контейнер для авторизации/регистрации -->
    <div class="container" id="authContainer">
      <div class="header">Фитнес Трекер</div>

      <div class="button-group login-active" id="buttonGroup">
        <button class="button button-login active" id="loginBtn">Войти</button>
        <button class="button button-register" id="registerBtn">Регистрация</button>
      </div>

      <div class="form-container" id="loginForm">
        <div class="input-group">
          <label for="login">Логин</label>
          <input type="text" id="login" placeholder="Введите ваш логин" />
        </div>

        <div class="input-group">
          <label for="password">Пароль</label>
          <input type="password" id="password" placeholder="Введите ваш пароль" />
        </div>

        <button class="submit-button" id="loginSubmit">Войти</button>
      </div>

      <div class="form-container hidden" id="registerForm">
        <div class="input-group">
          <label for="regLogin">Логин</label>
          <input type="text" id="regLogin" placeholder="Придумайте логин" />
        </div>

        <div class="input-group">
          <label for="regPassword">Пароль</label>
          <input type="password" id="regPassword" placeholder="Придумайте пароль" />
        </div>

        <div class="input-group">
          <label for="confirmPassword">Повторите пароль</label>
          <input type="password" id="confirmPassword" placeholder="Повторите пароль" />
        </div>

        <button class="submit-button" id="registerSubmit">Зарегистрироваться</button>
      </div>
    </div>

    <!-- Контейнер для профиля (изначально скрыт) -->
    <div class="container hidden" id="profileContainer">
      <!-- Вкладка Профиль -->
      <div class="tab-content profile-tab active">
        <div class="profile-container">
          <div class="profile-header">Ваш профиль</div>

          <div class="user-profile">
            <div class="avatar-container">
              <div class="avatar" id="avatarWrapper">
                <img
                  id="userAvatar"
                  class="default-avatar"
                  src="data:image/svg+xml;utf8,<svg xmlns='http://www.w3.org/2000/svg' viewBox='0 0 24 24' fill='%23999'><path d='M12 12c2.21 0 4-1.79 4-4s-1.79-4-4-4-4 1.79-4 4 1.79 4 4 4zm0 2c-2.67 0-8 1.34-8 4v2h16v-2c0-2.66-5.33-4-8-4z'/></svg>"
                  alt="Аватар"
                />
              </div>
              <label class="avatar-upload">
                <input type="file" id="avatarInput" accept="image/*" />
                <span>+</span>
              </label>
            </div>
            <div class="user-info">
              <div class="username" id="profileUsername">Пользователь</div>
              <div class="points">Баллы: <span id="userPoints">0</span></div>
            </div>
          </div>

          <div class="stats-container">
            <div class="stats-row">
              <div class="stat-item">
                <div class="stat-value" id="userHeight">175</div>
                <div class="stat-label">Рост (см)</div>
              </div>
              <div class="stat-item">
                <div class="stat-value" id="userWeight">70</div>
                <div class="stat-label">Вес (кг)</div>
              </div>
            </div>
            <div class="stats-row">
              <div class="stat-item">
                <div class="stat-value" id="userCalories">2000</div>
                <div class="stat-label">Калории (ккал)</div>
              </div>
              <div class="stat-item">
                <div class="stat-value" id="userActivity">3</div>
                <div class="stat-label">Активность</div>
              </div>
            </div>
          </div>

          <button class="logout-btn" id="logoutBtn">Выйти</button>
        </div>
      </div>

      <!-- Вкладка Параметры -->
      <div class="tab-content settings-tab">
        <div class="profile-container">
          <div class="profile-header">Параметры</div>
          <div style="text-align: center; padding: 20px">
            <p>Здесь будут настройки вашего профиля</p>
          </div>
        </div>
      </div>

      <!-- Вкладка Калории -->
      <div class="tab-content calories-tab">
        <div class="profile-container">
          <div class="profile-header">Калории</div>
          <div style="text-align: center; padding: 20px">
            <p>Здесь будет информация о потребляемых калориях</p>
          </div>
        </div>
      </div>

      <!-- Вкладка Задания -->
      <div class="tab-content tasks-tab">
        <div class="profile-container">
          <div class="profile-header">Задания</div>
          <div style="text-align: center; padding: 20px">
            <p>Здесь будут ваши задания и достижения</p>
          </div>
        </div>
      </div>
    </div>

    <!-- Нижнее меню (только для профиля) -->
    <div class="bottom-menu hidden" id="bottomMenu">
      <div class="menu-group profile-active" id="menuGroup">
        <button class="menu-button active" id="profileTabBtn">Профиль</button>
        <button class="menu-button" id="settingsTabBtn">Параметры</button>
        <button class="menu-button" id="caloriesTabBtn">Калории</button>
        <button class="menu-button" id="tasksTabBtn">Задания</button>
      </div>
    </div>

    <script>
      // База данных пользователей (используем localStorage для сохранения между сессиями)
      let usersDB = JSON.parse(localStorage.getItem('fitnessUsers')) || [];

      // Получаем все необходимые элементы DOM
      const loginBtn = document.getElementById('loginBtn');
      const registerBtn = document.getElementById('registerBtn');
      const buttonGroup = document.getElementById('buttonGroup');
      const loginForm = document.getElementById('loginForm');
      const registerForm = document.getElementById('registerForm');
      const loginSubmit = document.getElementById('loginSubmit');
      const registerSubmit = document.getElementById('registerSubmit');
      const authContainer = document.getElementById('authContainer');
      const profileContainer = document.getElementById('profileContainer');
      const profileUsername = document.getElementById('profileUsername');
      const logoutBtn = document.getElementById('logoutBtn');
      const avatarWrapper = document.getElementById('avatarWrapper');
      const userAvatar = document.getElementById('userAvatar');
      const avatarInput = document.getElementById('avatarInput');
      const userPoints = document.getElementById('userPoints');
      const userHeight = document.getElementById('userHeight');
      const userWeight = document.getElementById('userWeight');
      const userCalories = document.getElementById('userCalories');
      const userActivity = document.getElementById('userActivity');
      const bottomMenu = document.getElementById('bottomMenu');
      const menuGroup = document.getElementById('menuGroup');
      const profileTabBtn = document.getElementById('profileTabBtn');
      const settingsTabBtn = document.getElementById('settingsTabBtn');
      const caloriesTabBtn = document.getElementById('caloriesTabBtn');
      const tasksTabBtn = document.getElementById('tasksTabBtn');
      const profileTab = document.querySelector('.profile-tab');
      const settingsTab = document.querySelector('.settings-tab');
      const caloriesTab = document.querySelector('.calories-tab');
      const tasksTab = document.querySelector('.tasks-tab');

      // Обработчики для кнопок входа и регистрации
      loginBtn.addEventListener('click', function () {
        buttonGroup.classList.remove('register-active');
        buttonGroup.classList.add('login-active');
        loginBtn.classList.add('active');
        registerBtn.classList.remove('active');
        loginForm.classList.remove('hidden');
        registerForm.classList.add('hidden');
      });

      registerBtn.addEventListener('click', function () {
        buttonGroup.classList.remove('login-active');
        buttonGroup.classList.add('register-active');
        registerBtn.classList.add('active');
        loginBtn.classList.remove('active');
        registerForm.classList.remove('hidden');
        loginForm.classList.add('hidden');
      });

      // Обработчик формы входа
      loginSubmit.addEventListener('click', function () {
        const login = document.getElementById('login').value.trim();
        const password = document.getElementById('password').value.trim();

        if (!login || !password) {
          alert('Пожалуйста, заполните все поля');
          return;
        }

        // Проверяем существует ли пользователь
        const user = usersDB.find((user) => user.login === login && user.password === password);

        if (user) {
          // Пользователь найден - переходим на страницу профиля
          showProfile(login);
        } else {
          // Пользователь не найден
          alert('Такого пользователя не существует или неверный пароль');
        }
      });

      // Обработчик формы регистрации
      registerSubmit.addEventListener('click', function () {
        const login = document.getElementById('regLogin').value.trim();
        const password = document.getElementById('regPassword').value.trim();
        const confirmPassword = document.getElementById('confirmPassword').value.trim();

        if (!login || !password || !confirmPassword) {
          alert('Пожалуйста, заполните все поля');
          return;
        }

        if (password !== confirmPassword) {
          alert('Пароли не совпадают!');
          return;
        }

        // Проверяем не занят ли логин
        const userExists = usersDB.some((user) => user.login === login);
        if (userExists) {
          alert('Пользователь с таким логином уже существует');
          return;
        }

        // Добавляем нового пользователя
        usersDB.push({
          login,
          password,
          points: 0,
          height: 175,
          weight: 70,
          calories: 2000,
          activity: 3,
        });
        localStorage.setItem('fitnessUsers', JSON.stringify(usersDB));

        alert('Регистрация успешна! Теперь вы можете войти');

        // Очищаем поля и переключаем на форму входа
        document.getElementById('regLogin').value = '';
        document.getElementById('regPassword').value = '';
        document.getElementById('confirmPassword').value = '';

        buttonGroup.classList.remove('register-active');
        buttonGroup.classList.add('login-active');
        loginBtn.classList.add('active');
        registerBtn.classList.remove('active');
        loginForm.classList.remove('hidden');
        registerForm.classList.add('hidden');
      });

      // Обработчик кнопки выхода
      logoutBtn.addEventListener('click', function () {
        localStorage.removeItem('currentUser');
        authContainer.classList.remove('hidden');
        profileContainer.classList.add('hidden');
        bottomMenu.classList.add('hidden');
      });

      // Обработчик загрузки аватарки
      avatarInput.addEventListener('change', function (e) {
        const file = e.target.files[0];
        if (file) {
          const reader = new FileReader();
          reader.onload = function (event) {
            // Создаем новый элемент img для загруженной аватарки
            const newAvatar = document.createElement('img');
            newAvatar.src = event.target.result;
            newAvatar.style.width = '100%';
            newAvatar.style.height = '100%';
            newAvatar.style.objectFit = 'cover';
            newAvatar.style.borderRadius = '50%';

            // Очищаем контейнер и добавляем новую аватарку
            avatarWrapper.innerHTML = '';
            avatarWrapper.appendChild(newAvatar);

            // Обновляем аватар в базе данных
            const currentUser = localStorage.getItem('currentUser');
            if (currentUser) {
              const userIndex = usersDB.findIndex((user) => user.login === currentUser);
              if (userIndex !== -1) {
                usersDB[userIndex].avatar = event.target.result;
                localStorage.setItem('fitnessUsers', JSON.stringify(usersDB));
              }
            }
          };
          reader.readAsDataURL(file);
        }
      });

      // Обработчики для нижнего меню
      profileTabBtn.addEventListener('click', function () {
        menuGroup.classList.remove('settings-active', 'calories-active', 'tasks-active');
        menuGroup.classList.add('profile-active');
        setActiveTab('profile');
      });

      settingsTabBtn.addEventListener('click', function () {
        menuGroup.classList.remove('profile-active', 'calories-active', 'tasks-active');
        menuGroup.classList.add('settings-active');
        setActiveTab('settings');
      });

      caloriesTabBtn.addEventListener('click', function () {
        menuGroup.classList.remove('profile-active', 'settings-active', 'tasks-active');
        menuGroup.classList.add('calories-active');
        setActiveTab('calories');
      });

      tasksTabBtn.addEventListener('click', function () {
        menuGroup.classList.remove('profile-active', 'settings-active', 'calories-active');
        menuGroup.classList.add('tasks-active');
        setActiveTab('tasks');
      });

      // Функция переключения активной вкладки
      function setActiveTab(tabName) {
        // Удаляем active у всех кнопок
        document.querySelectorAll('.menu-button').forEach((btn) => {
          btn.classList.remove('active');
        });

        // Скрываем все вкладки
        document.querySelectorAll('.tab-content').forEach((tab) => {
          tab.classList.remove('active');
        });

        // Активируем выбранную вкладку
        switch (tabName) {
          case 'profile':
            profileTabBtn.classList.add('active');
            profileTab.classList.add('active');
            break;
          case 'settings':
            settingsTabBtn.classList.add('active');
            settingsTab.classList.add('active');
            break;
          case 'calories':
            caloriesTabBtn.classList.add('active');
            caloriesTab.classList.add('active');
            break;
          case 'tasks':
            tasksTabBtn.classList.add('active');
            tasksTab.classList.add('active');
            break;
        }
      }

      // Функция показа профиля пользователя
      function showProfile(username) {
        profileUsername.textContent = username;

        // Загружаем данные пользователя
        const user = usersDB.find((user) => user.login === username);
        if (user) {
          // Очищаем контейнер аватара
          avatarWrapper.innerHTML = '';

          if (user.avatar) {
            // Если есть загруженная аватарка, отображаем ее
            const avatarImg = document.createElement('img');
            avatarImg.src = user.avatar;
            avatarImg.style.width = '100%';
            avatarImg.style.height = '100%';
            avatarImg.style.objectFit = 'cover';
            avatarImg.style.borderRadius = '50%';
            avatarWrapper.appendChild(avatarImg);
          } else {
            // Если нет аватарки, отображаем стандартную иконку
            const defaultAvatar = document.createElement('img');
            defaultAvatar.className = 'default-avatar';
            defaultAvatar.src =
              "data:image/svg+xml;utf8,<svg xmlns='http://www.w3.org/2000/svg' viewBox='0 0 24 24' fill='%23999'><path d='M12 12c2.21 0 4-1.79 4-4s-1.79-4-4-4-4 1.79-4 4 1.79 4 4 4zm0 2c-2.67 0-8 1.34-8 4v2h16v-2c0-2.66-5.33-4-8-4z'/></svg>";
            avatarWrapper.appendChild(defaultAvatar);
          }

          userPoints.textContent = user.points || 0;
          userHeight.textContent = user.height || 175;
          userWeight.textContent = user.weight || 70;
          userCalories.textContent = user.calories || 2000;
          userActivity.textContent = user.activity || 3;
        }

        authContainer.classList.add('hidden');
        profileContainer.classList.remove('hidden');
        bottomMenu.classList.remove('hidden');

        // Активируем вкладку профиля
        setActiveTab('profile');

        // Сохраняем текущего пользователя
        localStorage.setItem('currentUser', username);
      }

      // Проверяем авторизацию при загрузке страницы
      window.addEventListener('DOMContentLoaded', function () {
        const currentUser = localStorage.getItem('currentUser');
        if (currentUser) {
          showProfile(currentUser);
        }
      });
    </script>
  </body>
</html>
